<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Проверь себя</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css'>
	<link rel="stylesheet" href="./style.css">
</head>

<body>
	<section class="container">
		<div class="questionBox" id="app">
			<transition :duration="{ enter: 500, leave: 300 }" enter-active-class="animated zoomIn" leave-active-class="animated zoomOut" mode="out-in">
				<div class="questionContainer" v-if="questionIndex<quiz.questions.length" v-bind:key="questionIndex">
					<header>
						<h1 class="title is-6">Проверь себя</h1>
						<div class="progressContainer">
							<progress class="progress is-info is-small" :value="(questionIndex/quiz.questions.length)*100" max="100">{{(questionIndex/quiz.questions.length)*100}}%</progress>
							<p>{{(questionIndex/quiz.questions.length)*100}}% выполнено</p>
						</div>
					</header>
					<h2 class="titleContainer title">{{ quiz.questions[questionIndex].text }}</h2>
					<div class="optionContainer">
						<div class="option" v-for="(response, index) in quiz.questions[questionIndex].responses" @click="selectOption(index)" :class="{ 'is-selected': userResponses[questionIndex] == index}"
						 :key="index">
							{{ index | charIndex }}. {{ response.text }}
						</div>
					</div>
					<footer class="questionFooter">
						<nav class="pagination" role="navigation" aria-label="pagination">
							<a class="button" v-on:click="prev();" :disabled="questionIndex < 1">
								Назад
							</a>
							<a class="button" :class="(userResponses[questionIndex]==null)?'':'is-active'" v-on:click="next();" :disabled="questionIndex>=quiz.questions.length">
								{{ (userResponses[questionIndex]==null)?'Дальше':'Дальше' }}
							</a>
						</nav>
					</footer>
				</div>
				<div v-if="questionIndex >= quiz.questions.length" v-bind:key="questionIndex" class="quizCompleted has-text-centered">

					<!-- quizCompletedIcon: Achievement Icon -->
					<span class="icon">
						<i class="fa" :class="score()>3?'fa-check-circle-o is-active':'fa-times-circle'"></i>
					</span>

					<!--resultTitleBlock-->
					<h2 class="title">
						Это была {{ (score()>7?'Великолепно!':(score()
						<4? 'плохая': 'хорошая')) }} работа! </h2>
							<p class="subtitle">
								Итоговый счет: {{ score() }} / {{ quiz.questions.length }}
							</p>
							<br>
							<a class="button" @click="restart()">попробовать еще раз
								<i class="fa fa-refresh"></i>
							</a>
							<!--/resultTitleBlock-->

				</div>
				<!--/quizCompetedResult-->

			</transition>

		</div>
		<!--/questionBox-->

	</section>
	<!--/container-->
	<!-- partial -->
	<script src='https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.min.js'></script>
	<script src="./script.js"></script>

</body>

</html>